<include target="_config.html" cond="$from_ajax == TRUE" />
{@
	$selectedTheme = $module_info->colorset;
	if(!$selectedTheme) $selectedTheme = 'white';
}

	<!--// 현재 접속자 목록 -->
	<table width="100%" cellspacing="0" border="0">
	<caption>
		<span class="title">{$lang->nowconnect}</span>
		<span class="userCount">{number_format($total_count)}</span>
		<span class="realtime" cond="$module_info->use_realtime == 'Y'">
			<input type="checkbox" id="use_realtime" class="checkbox" /> 
			<label for="use_realtime" title="클릭하여 실시간 새로고침 기능을 켜거나 끌 수 있습니다."><i class="unchecked"></i>실시간 새로고침</label>
		</span>
		<span class="adminMenu">
			<block cond="$module_info->module_srl && $logged_info->is_admin == 'Y'">
				<a href="{getUrl('act', 'dispNowconnectAdminModuleConfig')}"><img src="./img/iconConfig.png" width="16" height="16" alt="" /> {$lang->cmd_module_config}</a>&nbsp;&nbsp;
				<a href="{getUrl('act', 'dispNowconnectAdminSkinInfo')}"><img src="./img/iconSkinConfig.png" width="16" height="16" alt="" /> {$lang->cmd_manage_skin}</a></span>
			</block>
		</caption>
	<colgroup>
		<col class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')" />
		<col class="user" />
		<col class="ipaddress" cond="!$module_info->display_ipaddress || $module_info->display_ipaddress == 'show' || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')" />
	</colgroup>
	<thead>
	<tr>
		<th class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>{$lang->no}</span></div></th>
		<th class="user"><div><span>{$lang->nick_name}</span></div></th>
		<th class="user" cond="!$module_info->display_ipaddress || $module_info->display_ipaddress == 'show' || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>IP</span></div></th>
		<th class="location" cond="!$module_info->display_location || $module_info->display_location == 'show' || ($module_info->display_location == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>{$lang->current_location}</span></div></th>
	</tr>
	</thead>
	{@ $no = 1;}
	<tr class="itsMe"|cond="$user->itsMe" loop="$user_list => $key, $user">
		<td class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')">{$no}</td>
		<td class="user">
			<span class="userIcon member" cond="$user->member_srl && !$user->isCrawler"></span>
			<span class="userIcon guest" cond="!$user->member_srl"></span>
			<span class="userName member_{$user->member_srl}" cond="$user->member_srl && !$user->isCrawler">{$user->nick_name}</span>
			<span class="userName" cond="!$user->member_srl">{$user->nick_name}</span>
			<span class="userIcon mobile" cond="$user->isMobileDevice"></span>
		</td>
		<td class="ipaddress" cond="!$module_info->display_ipaddress || $module_info->display_ipaddress == 'show' || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')">{preg_replace('/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/','*.*.$3.$4', $user->ipaddress)}</td>
		<td class="location" cond="!$module_info->display_location || $module_info->display_location == 'show' || ($module_info->display_location == 'showadmin' && $logged_info->is_admin == 'Y')">
			<block cond="$user->location">
				<strong cond="$user->isMobile">[{$lang->locationList['Mobile']}] </strong>
				<a href="{$user->location_url}" cond="$module_info->location_url == 'link' || ($module_info->location_url == 'linkadmin' && $logged_info->is_admin)">{$user->location}</a>
				<span cond="$module_info->location_url == '' || $module_info->location_url == 'notlink'" title="{$user->location}"|cond="cut_str($user->location, $module_info->cut_location_size) != $user->location">{cut_str($user->location, $module_info->cut_location_size)}</span>
			</block>
			<block cond="!$user->location">
				<span class="location" title="URL :&#10;{$user->location_url}">{$lang->locationList['Unknown']}</span>
			</block>
		</td>
		{@$no++}
	</tr>
	</table>

	<!--// 페이지-->
	<include target="_nowconnect.page.html" />