<include target="_config.html" cond="$from_ajax == TRUE" />
{@
	$selectedTheme = $module_info->colorset;
	if(!$selectedTheme) $selectedTheme = 'white';
	$myId = session_id();
}
	<!--// 현재 접속자 목록 -->
	<table width="100%" cellspacing="0" cellpadding="0" border="0">
	<caption>
		<span class="title">
			<block cond="$module_info->title">{htmlspecialchars($module_info->title)}</block>
			<block cond="!$module_info->title">{$lang->nowconnect}</block> 
			<span class="label{$labelClass}">{number_format($total_count)}</span>
		</span>
		<span class="adminMenu">
			<span class="realtime" cond="$module_info->use_realtime == 'Y' && (int)($module_info->realtime_duration) >= 1000">
				<input type="checkbox" id="use_realtime" class="checkbox" /> 
				<label for="use_realtime" title="{$lang->click_to_enable_realtime_update}"><i class="unchecked"></i>{$lang->realtime_update}</label>
			</span>
			<a href="{getUrl('act', 'dispNowconnectAdminModuleConfig')}" cond="$module_info->module_srl && $logged_info->is_admin == 'Y'" class="nbtn nbtn-primary"><i class="icon-cog"></i> {$lang->cmd_module_config}</a>&nbsp;&nbsp;
			<a href="{getUrl('act', 'dispNowconnectAdminSkinInfo')}" cond="$module_info->module_srl && $logged_info->is_admin == 'Y'" class="nbtn nbtn-danger"><i class="icon-th"></i> {$lang->cmd_manage_skin}</a>
		</span>
		</caption>
	<colgroup>
		<col class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')" />
		<col class="user" />
		<col class="ipaddress" cond="$module_info->display_ipaddress == 'show' || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')" />
	</colgroup>
	<thead>
	<tr>
		<th class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>{$lang->no}</span></div></th>
		<th class="user"><div><span>{$lang->nick_name}</span></div></th>
		<th class="user" cond="$module_info->display_ipaddress == 'show' || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>IP</span></div></th>
		<th class="location" cond="!$module_info->display_location || $module_info->display_location == 'show' || ($module_info->display_location == 'showadmin' && $logged_info->is_admin == 'Y')"><div><span>{$lang->current_location}</span></div></th>
	</tr>
	</thead>
	{@ $no = 1;}
	<tr class="itsMe"|cond="$user->_id == $myId" loop="$user_list => $key, $user">
		<td class="no" cond="$module_info->display_num == 'show' || ($module_info->display_num == 'showadmin' && $logged_info->is_admin == 'Y')">{$no}</td>
		<td class="user">
			<span class="userIcon member" cond="$user->member_srl && !$user->isCrawler"></span>
			<span class="userIcon guest" cond="!$user->member_srl"></span>
			<span class="userName member_{$user->member_srl}" cond="$user->member_srl && !$user->isCrawler">{$user->nick_name}</span>
			<span class="userName" cond="!$user->member_srl">{$user->nick_name}</span>
			<i class="glyphicon glyphicon-phone" cond="$user->isMobileDevice"></i>
		</td>
		<td class="ipaddress" cond="($module_info->display_ipaddress == 'show' && $logged_info->is_admin == 'Y') || ($module_info->display_ipaddress == 'showadmin' && $logged_info->is_admin == 'Y')">{$user->ipaddress}</td>
		<td class="ipaddress" cond="($module_info->display_ipaddress == 'show' && $logged_info->is_admin != 'Y')">{preg_replace('/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/','*.$2.*.$4', $user->ipaddress)}</td>
		<td class="location" cond="!$module_info->display_location || $module_info->display_location == 'show' || ($module_info->display_location == 'showadmin' && $logged_info->is_admin == 'Y')">
			<block cond="$user->location && ($user->is_admin =='N' || $user->is_admin == 'Y' && $logged_info->is_admin == 'Y')">
				<strong cond="$user->isMobile">[{$lang->locationList['Mobile']}] </strong>
				<a href="{$user->location_url}" cond="$module_info->location_url == 'link' || ($module_info->location_url == 'linkadmin' && $logged_info->is_admin)">{$user->location}</a>
				<span cond="$module_info->location_url == '' || $module_info->location_url == 'notlink'" title="{$user->location}"|cond="cut_str($user->location, $module_info->cut_location_size) != $user->location">{cut_str($user->location, $module_info->cut_location_size)}</span>
			</block>
			<block cond="!$user->location || ($user->is_admin == 'Y' && $logged_info->is_admin != 'Y')">
				<span class="location" title="알 수 없음"><a href="{$user->location_url}">{$lang->locationList['Unknown']}</a></span>
			</block>
		</td>
		{@$no++}
	</tr>
	</table>

	<!--// 페이지-->
	<include target="_nowconnect.page.html" />