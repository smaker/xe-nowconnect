<div cond="$XE_VALIDATOR_MESSAGE" class="message {$XE_VALIDATOR_MESSAGE_TYPE}">
	<p>{$XE_VALIDATOR_MESSAGE}</p>
</div>

<form ruleset="insertNowconnect" action="./" method="post" enctype="multipart/form-data" class="form">
	<input type="hidden" name="module" value="nowconnect" />
	<input type="hidden" name="act" value="procNowconnectAdminUpdate" />
	<input type="hidden" name="module_srl" value="{$module_info->module_srl}" />
	<input cond="$mid || $module_srl" type="hidden" name="success_return_url" value="{getRequestUriByServerEnviroment()}" />
	<ul>
		<li>
			<p class="q">{$lang->mid}</p>
			<p class="a"><input type="text" name="nowconnect_name" value="{$module_info->mid}" /></p>
			<p class="desc">{$lang->about_mid}</p>
		</li>
		<li>
			<p class="q">{$lang->module_category}</p>
			<p class="a">
				<select name="module_category_srl">
					<option value="0">{$lang->notuse}</option>
					<option loop="$module_category => $key, $val" value="{$key}" selected="selected"|cond="$module_info->module_category_srl == $key">{$val->title}</option>
				</select>
			</p>
			<p class="desc">{$lang->about_module_category}</p>
		</li>
		<li>
			<p class="q">{$lang->browser_title}</p>
			<p class="a multiLangEdit">
				<input type="hidden" name="browser_title" value="<!--@if(strpos($module_info->browser_title, '$user_lang->') === false)-->{$module_info->browser_title}<!--@else-->{htmlspecialchars($module_info->browser_title)}<!--@end-->" class="vLang" />
				<input type="text" value="{$module_info->browser_title}" id="browser_title">
				<span class="desc"><a href="#langEdit" class="editUserLang tgAnchor">{$lang->cmd_set_multilingual}</a></span>
			</p>
			<p class="desc">{$lang->about_browser_title}</p>
		<li>
			<p class="q">{$lang->layout}</p>
			<p class="a">
				<select name="layout_srl">
					<option value="{$val->layout_srl}" selected="selected"|cond="$module_info->layout_srl == $val->layout_srl" loop="$layout_list => $key, $val">{$val->title}<block cond="$val->layout_srl != -1"> ({$val->layout})</block></option>
				</select>
			</p>
			<p class="desc">{$lang->about_layout}</p>
		</li>
		<li>
			<p class="q">{$lang->skin}</p>
			<p class="a">
				<select name="skin">
					<option value="{$key}" selected="selected"|cond="$key == $module_info->skin" loop="$skin_list => $key, $val">{$val->title}</option>
				</select>
			</p>
			<p class="desc">{$lang->about_skin}</p>
		</li>
		<li>
			<p class="q">{$lang->list_count}</label>
			<p class="a">
				<input type="number" name="list_count" value="{$module_info->list_count?$module_info->list_count:20}" min="1" style="width:30px" />
			</p>
			<p class="desc">{$lang->about_nowconnect_list_count}</p>
		</li>
		<li>
			<p class="q">{$lang->page_count}</p>
			<p class="a">
				<input type="number" name="page_count" value="{$module_info->page_count?$module_info->page_count:10}" min="10" style="width:30px" />
			</p>
			<p class="desc">{$lang->about_page_count}</p>
		</li>
		<li>
			<p class="q">{$lang->api_key}</p>
			<p class="a">
				<input type="text" name="api_key" value="{htmlspecialchars($module_info->api_key)}" maxlength="40" />
			</p>
			<p class="desc">{$lang->about_api_key}</p>
		</li>
		<li>
			<p class="q">{$lang->exclude_admin}</p>
			<p class="a"><input type="radio" id="exclude_admin_y" name="exclude_admin" value="Y" checked="checkec"|cond="$module_info->exclude_admin == 'Y'" /> <label for="exclude_admin_y" class="x_inline">{$lang->yes}</label> <input type="radio"  id="exclude_admin_n" name="exclude_admin" value="N" checked="checkec"|cond="$module_info->exclude_admin != 'Y'" /> <label for="exclude_admin_n" class="x_inline">{$lang->not}</label></p>
			<p class="desc">{$lang->about_exclude_admin}</p>
		</li>
		<li>
			<p class="q">{$lang->nowconnect_target}</p>
			<p class="a">
				<select name="nowconnect_target">
					<option value="all" selected="selected"|cond="$module_info->nowconnect_target=='all'">{$lang->ncxe_all_member}</option>
					<option value="member" selected="selected"|cond="$module_info->nowconnect_target=='member'">{$lang->ncxe_logged_member_only}</option>
				</select>
			</p>
			<p class="desc">{$lang->about_nowconnect_target}</p>
		</li>
		<li>
			<p class="q">{$lang->use_realtime}</p>
			<p class="a">
				<select name="use_realtime">
					<option value="N" selected="selected"|cond="$module_info->use_realtime=='N'">{$lang->notuse}</option>
					<option value="Y" selected="selected"|cond="$module_info->use_realtime=='Y'">{$lang->use}</option>
				</select>
			</p>
			<p class="desc">{$lang->about_use_realtime}</p>
		</li>
		<li>
			<p class="q">{$lang->realtime_duration}</p>
			<p class="a">
				<input type="number" name="realtime_duration" value="{(int)$module_info->realtime_duration}" style="width:80px;" />
			</p>
			<p class="desc">{$lang->about_realtime_duration}</p>
		</li>
		<li>
			<p class="q">{$lang->exclude_ip}</p>
			<p class="a">
				<textarea name="exclude_ip" rows="4" id="exclude_ip">{htmlspecialchars($module_info->exclude_ip)}</textarea>
			</p>
			<p class="desc">{$lang->about_exclude_ip}</p>
		</li>
		<li>
			<p class="q">{$lang->include_duplicated_user}</p>
			<p class="a">
				<select name="include_duplicated_user">
					<option value="N" selected="selected"|cond="$module_info->include_duplicated_user=='N'">{$lang->not_include}</option>
					<option value="Y" selected="selected"|cond="$module_info->include_duplicated_user=='Y'">{$lang->include}</option>
				</select>
			</p>
			<p class="desc">{$lang->about_include_duplicated_user}</p>
		</li>
		<li>
			<p class="q">{$lang->header_text}</p>
			<p class="a multiLangEdit">
				<input type="hidden" name="header_text" value="<!--@if(strpos($module_info->header_text, '$user_lang->') === false)-->{$module_info->header_text}<!--@else-->{htmlspecialchars($module_info->header_text)}<!--@end-->" class="vLang" />
				<textarea id="header_text" class="vLang" rows="8" cols="42">{$module_info->header_text}</textarea>
				<span class="desc"><a href="#langEditTextarea" class="editUserLang tgAnchor">{$lang->cmd_set_multilingual}</a></span>
			</p>
			<p class="desc">{$lang->about_header_text}</p>
		</li>
		<li>
			<p class="q">{$lang->footer_text}</p>
			<p class="a multiLangEdit">
				<input type="hidden" name="footer_text" value="<!--@if(strpos($module_info->footer_text, '$user_lang->') === false)-->{$module_info->footer_text}<!--@else-->{htmlspecialchars($module_info->footer_text)}<!--@end-->" class="vLang" />
				<textarea id="footer_text" class="vLang" rows="8" cols="42">{$module_info->footer_text}</textarea>
				<span class="desc"><a href="#langEditTextarea" class="editUserLang tgAnchor">{$lang->cmd_set_multilingual}</a></span>
			</p>
			<p class="desc">{$lang->about_footer_text}</p>
		</li>
	</ul>
	<div class="btnArea">
		<span class="btn"><input type="submit" value="{$lang->cmd_submit}" /></span>
	</div>

	<!-- Multilingual -->
	<div id="langEdit" class="langEdit tgContent">
			<ul class="langList"></ul>
			<div class="langInput">
					<h2>{$lang->multilingual} <strong>{$lang->cmd_modify}...</strong> | <a href="#langEdit">{$lang->cmd_insert}</a></h2>
					<ul>
							{@
									/* move current language to the top */
									$a = array($lang_type=>$lang_supported[$lang_type]);
									unset($lang_supported[$lang_type]);
									$lang_supported = array_merge($a, $lang_supported);
							}
							<li loop="$lang_supported=>$code,$name" class="{$code}"><label for="{$code}_var1">{$name}</label> <input type="text" value="" id="{$code}_var1" /></li>
					</ul>
					<div class="action">
							<div class="btnArea">
									<span class="btn small"><input type="submit" value="{$lang->use}|{$lang->use_after_save}" /></span>
							</div>
							<p><a href="{getUrl('act','dispModuleAdminLangcode')}">{$lang->multilingual_manager}</a></p>
					</div>
			</div>
	</div>
	<!-- /Multilingual -->

	<!-- Multilingual -->
	<div id="langEditTextarea" class="langEdit tgContent">
			<ul class="langList"></ul>
			<div class="langInput">
					<h2>{$lang->multilingual} <strong>{$lang->cmd_modify}...</strong> | <a href="#langEdit">{$lang->cmd_insert}</a></h2>
					<ul>
							{@
									/* move current language to the top */
									$a = array($lang_type=>$lang_supported[$lang_type]);
									unset($lang_supported[$lang_type]);
									$lang_supported = array_merge($a, $lang_supported);
							}
							<li loop="$lang_supported=>$code,$name" class="{$code}"><label for="{$code}_var1">{$name}</label> <textarea id="{$code}_var1"></textarea></li>
					</ul>
					<div class="action">
							<div class="btnArea">
									<span class="btn small"><input type="submit" value="{$lang->use}|{$lang->use_after_save}" /></span>
							</div>
							<p><a href="{getUrl('act','dispModuleAdminLangcode')}">{$lang->multilingual_manager}</a></p>
					</div>
			</div>
	</div>
	<!-- /Multilingual -->

</form>